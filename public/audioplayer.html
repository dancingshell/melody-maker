<div>go away vixen, dreamboat annie, and dotti</div>
<button onclick="playSong()">Play things</button>
<script>
    var parsedQueryString = JSON.parse(decodeURIComponent(window.location.search.split('=').pop()))

    class Sound {

        constructor(context) {
        this.context = context;
        }

        init() {
            this.oscillator = this.context.createOscillator();
            this.gainNode = this.context.createGain();

            this.oscillator.connect(this.gainNode);
            this.gainNode.connect(this.context.destination);
            this.oscillator.type = 'sine';
        }

        play(value, timeStart, timeFinish) {
            this.init();

            this.oscillator.frequency.value = value;
            this.gainNode.gain.setValueAtTime(1, this.context.currentTime);
                    
            this.oscillator.start(timeStart);
            this.stop(timeFinish);

        }

        stop(time) {
            this.gainNode.gain.exponentialRampToValueAtTime(0.001, time + 1);
            this.oscillator.stop(time + 1);
        }
    
    }

    function playSong() {
        let context = new (window.AudioContext || window.webkitAudioContext)();
        let note = new Sound(context);
        let now = context.currentTime;
        parsedQueryString.forEach(array => {
            note.play(array[0], now + array[1], now + array[2]);
        })
    }

    function playScale(notesArray) {
        // console.log(notesArray)
        let context = new (window.AudioContext || window.webkitAudioContext)();
        let note = new Sound(context);
        let now = context.currentTime + 4;
        notesArray.forEach((element) => {
            note.play(noteFrequencyMap[element][4], now)
            // console.log(noteFrequencyMap[element][4])
            now += .5
        })
        note.play(noteFrequencyMap[notesArray[0]][5], now)
    }
</script>